import{useQueries as d}from"@tanstack/react-query";import{useAuth as g}from"@clerk/tanstack-start";import{h as m,a as y,k as n,O as i,g as h}from"./getAllCategories-f73zdoR0.js";import{g as p}from"./getCurrentLoggedInUser-BSklaDhP.js";import{g as b}from"./getAllIngredients-6sXcg4a7.js";import{g as f,a as I}from"./getLatestGrocerylistByHouseholdId-edhHmGoA.js";import{z as t}from"zod";import{useState as q}from"react";const w=t.object({id:t.string().uuid(),firstname:t.string(),lastname:t.string(),household_id:t.string().uuid()}),D=t.object({id:t.string().uuid(),name:t.string(),category_id:t.string().uuid(),createdat:t.string().refine(s=>!isNaN(Date.parse(s)),{message:"Invalid date"}),createdby:t.string().uuid().nullable(),deleted:t.boolean()}),L=t.object({id:t.string().uuid(),type:t.number(),check:t.boolean(),ingredient:D,createdby:t.string().uuid().nullable()}),T=t.object({id:t.string().uuid(),createdat:t.string().refine(s=>!isNaN(Date.parse(s)),{message:"Invalid date"}),items:t.array(L)});t.object({id:t.string().uuid(),createdBy:t.string().uuid(),createdAt:t.string().refine(s=>!isNaN(Date.parse(s)),{message:"Invalid date"}),active:t.boolean(),members:t.array(w),grocerylist:T});async function U(s){return await m(y.getCurrentUserHouseholdDetails(),"GET",void 0,{accessToken:s})}function _(){const{getToken:s}=g(),a=s({template:"1_HOUR"}).then(e=>e?.toString()),[u,l]=q({userListId:null,householdListId:null}),r=d({queries:[{queryKey:n.currentUser,queryFn:async()=>{const e=await p(await a);return e.data?e.data:null},enabled:!!a,staleTime:i},{queryKey:n.latestGrocerylistByUserId,queryFn:async()=>{const e=await f(await a);return e.data?(l(c=>({...c,householdListId:e.data?e.data.id:null})),e.data):null},enabled:!!a,staleTime:i}]}),o=d({queries:[{queryKey:n.categories,queryFn:async()=>{const e=await h(await a);return e.data?e.data:null},enabled:!!a,staleTime:i},{queryKey:n.ingredients,queryFn:async()=>{const e=await b(await a);return e.data?e.data:null},enabled:!!a,staleTime:i},{queryKey:n.latestGrocerylistByHouseholdId,queryFn:async()=>{const e=await I(await a);return e.data?e.data:null},enabled:!!a&&!!u.householdListId,staleTime:i},{queryKey:n.currentUserHouseholdDetails,queryFn:async()=>{const e=await U(await a);return e.data?e.data:null},enabled:!!a,staleTime:i}]});return{currentUser:r[0].data,categories:o[0].data,ingredients:o[2].data,myList:r[1].data,myHouseholdList:o[2].data,household:o[3].data,isLoading:r.some(e=>e.isLoading),isFetching:r.some(e=>e.isFetching),isError:r.some(e=>e.isError),isAbsent:r.some(e=>!e.data)}}export{U as g,_ as u};
