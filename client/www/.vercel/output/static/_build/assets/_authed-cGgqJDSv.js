import{r as i,j as r,f as re,u as Ae,L as A,g as ae,h as ke}from"./client-oEds41LK.js";import{G as ne,F as Re}from"./index-DuyP5nz8.js";import{c as L,a as De,u as oe,S as Le,B as ie,L as Se}from"./button-D2Gc-Tkd.js";import{c as le,A as _e,C as Qe,a as Ie,R as Fe,D as He,b as qe,d as Be,e as z,f as F}from"./dropdown-menu-BmGc5aOI.js";import{O as ce,C as ue,a as de,X as Ge,T as he,D as fe,P as Ke,R as $e,b as ze,c as me,d as Ue,e as M,f as Ve,g as Xe,u as Ze,h as Ye,M as We}from"./mutation-BZFfKvOs.js";import{c as k}from"./utils-B7BGwIMI.js";import{S as pe,h as xe,Q as Je,n as b,m as U,a as V,b as j,e as et,c as tt,d as st,f as rt,o as X,r as Z,g as at,i as Y,p as W,s as nt,k as J,u as ot,j as it}from"./getAllCategories-BHeGl718.js";import{g as lt}from"./getLatestGrocerylistByHouseholdId-Dk3ckNDT.js";import{g as ct}from"./getAllIngredients-Bz8TcYMr.js";import{u as ut}from"./useGetCurrentLoggedInUser-TD5-7DA1.js";import{U as dt}from"./user-_ufPmFvn.js";import{H as ge}from"./house-DsxACciB.js";import{C as ht,a as ft}from"./clipboard-list-Dgx1aeGg.js";import{u as mt}from"./useAppData-ClLZv9oG.js";import"./floating-ui.dom-AxQjRnNf.js";import"./getCurrentLoggedInUser-DPzxe7eQ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=L("Drumstick",[["path",{d:"M15.4 15.63a7.875 6 135 1 1 6.23-6.23 4.5 3.43 135 0 0-6.23 6.23",key:"1dtqwm"}],["path",{d:"m8.29 12.71-2.6 2.6a2.5 2.5 0 1 0-1.65 4.65A2.5 2.5 0 1 0 8.7 18.3l2.59-2.59",key:"1oq1fw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=L("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=L("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=L("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),vt=$e,bt=ze,P=de,wt=Ke,ye=i.forwardRef(({className:e,...t},s)=>r.jsx(ce,{className:k("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));ye.displayName=ce.displayName;const jt=De("fixed z-50 gap-4 dark bg-header p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ve=i.forwardRef(({side:e="right",className:t,children:s,...a},n)=>r.jsxs(wt,{children:[r.jsx(ye,{}),r.jsxs(ue,{ref:n,className:k(jt({side:e}),t),...a,children:[s,r.jsxs(de,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Ge,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ve.displayName=ue.displayName;const Ct=i.forwardRef(({className:e,...t},s)=>r.jsx(he,{ref:s,className:k("text-lg font-semibold text-foreground",e),...t}));Ct.displayName=he.displayName;const Nt=i.forwardRef(({className:e,...t},s)=>r.jsx(fe,{ref:s,className:k("text-sm text-muted-foreground",e),...t}));Nt.displayName=fe.displayName;function Pt(e){return ne({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M16 9C16 11.2091 14.2091 13 12 13C9.79086 13 8 11.2091 8 9C8 6.79086 9.79086 5 12 5C14.2091 5 16 6.79086 16 9ZM14 9C14 10.1046 13.1046 11 12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 14.0902 3.71255 16.014 4.90798 17.5417C6.55245 15.3889 9.14627 14 12.0645 14C14.9448 14 17.5092 15.3531 19.1565 17.4583C20.313 15.9443 21 14.0524 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12ZM12 21C9.84977 21 7.87565 20.2459 6.32767 18.9878C7.59352 17.1812 9.69106 16 12.0645 16C14.4084 16 16.4833 17.1521 17.7538 18.9209C16.1939 20.2191 14.1881 21 12 21Z",fill:"currentColor"},child:[]}]})(e)}var Tt="VisuallyHidden",be=i.forwardRef((e,t)=>r.jsx(me.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));be.displayName=Tt;var Mt=be,[S,Ns]=Ue("Tooltip",[le]),_=le(),we="TooltipProvider",Et=700,q="tooltip.open",[Ot,G]=S(we),je=e=>{const{__scopeTooltip:t,delayDuration:s=Et,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:o}=e,[l,h]=i.useState(!0),c=i.useRef(!1),f=i.useRef(0);return i.useEffect(()=>{const u=f.current;return()=>window.clearTimeout(u)},[]),r.jsx(Ot,{scope:t,isOpenDelayed:l,delayDuration:s,onOpen:i.useCallback(()=>{window.clearTimeout(f.current),h(!1)},[]),onClose:i.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>h(!0),a)},[a]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback(u=>{c.current=u},[]),disableHoverableContent:n,children:o})};je.displayName=we;var Q="Tooltip",[At,I]=S(Q),Ce=e=>{const{__scopeTooltip:t,children:s,open:a,defaultOpen:n=!1,onOpenChange:o,disableHoverableContent:l,delayDuration:h}=e,c=G(Q,e.__scopeTooltip),f=_(t),[u,p]=i.useState(null),g=Ze(),y=i.useRef(0),d=l??c.disableHoverableContent,m=h??c.delayDuration,x=i.useRef(!1),[v=!1,w]=Ye({prop:a,defaultProp:n,onChange:$=>{$?(c.onOpen(),document.dispatchEvent(new CustomEvent(q))):c.onClose(),o?.($)}}),C=i.useMemo(()=>v?x.current?"delayed-open":"instant-open":"closed",[v]),N=i.useCallback(()=>{window.clearTimeout(y.current),x.current=!1,w(!0)},[w]),O=i.useCallback(()=>{window.clearTimeout(y.current),w(!1)},[w]),K=i.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{x.current=!0,w(!0)},m)},[m,w]);return i.useEffect(()=>()=>window.clearTimeout(y.current),[]),r.jsx(Fe,{...f,children:r.jsx(At,{scope:t,contentId:g,open:v,stateAttribute:C,trigger:u,onTriggerChange:p,onTriggerEnter:i.useCallback(()=>{c.isOpenDelayed?K():N()},[c.isOpenDelayed,K,N]),onTriggerLeave:i.useCallback(()=>{d?O():window.clearTimeout(y.current)},[O,d]),onOpen:N,onClose:O,disableHoverableContent:d,children:s})})};Ce.displayName=Q;var B="TooltipTrigger",Ne=i.forwardRef((e,t)=>{const{__scopeTooltip:s,...a}=e,n=I(B,s),o=G(B,s),l=_(s),h=i.useRef(null),c=oe(t,h,n.onTriggerChange),f=i.useRef(!1),u=i.useRef(!1),p=i.useCallback(()=>f.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),r.jsx(_e,{asChild:!0,...l,children:r.jsx(me.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:c,onPointerMove:M(e.onPointerMove,g=>{g.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:M(e.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:M(e.onPointerDown,()=>{f.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:M(e.onFocus,()=>{f.current||n.onOpen()}),onBlur:M(e.onBlur,n.onClose),onClick:M(e.onClick,n.onClose)})})});Ne.displayName=B;var kt="TooltipPortal",[Ps,Rt]=S(kt,{forceMount:void 0}),E="TooltipContent",Pe=i.forwardRef((e,t)=>{const s=Rt(E,e.__scopeTooltip),{forceMount:a=s.forceMount,side:n="top",...o}=e,l=I(E,e.__scopeTooltip);return r.jsx(Ve,{present:a||l.open,children:l.disableHoverableContent?r.jsx(Te,{side:n,...o,ref:t}):r.jsx(Dt,{side:n,...o,ref:t})})}),Dt=i.forwardRef((e,t)=>{const s=I(E,e.__scopeTooltip),a=G(E,e.__scopeTooltip),n=i.useRef(null),o=oe(t,n),[l,h]=i.useState(null),{trigger:c,onClose:f}=s,u=n.current,{onPointerInTransitChange:p}=a,g=i.useCallback(()=>{h(null),p(!1)},[p]),y=i.useCallback((d,m)=>{const x=d.currentTarget,v={x:d.clientX,y:d.clientY},w=Qt(v,x.getBoundingClientRect()),C=It(v,w),N=Ft(m.getBoundingClientRect()),O=qt([...C,...N]);h(O),p(!0)},[p]);return i.useEffect(()=>()=>g(),[g]),i.useEffect(()=>{if(c&&u){const d=x=>y(x,u),m=x=>y(x,c);return c.addEventListener("pointerleave",d),u.addEventListener("pointerleave",m),()=>{c.removeEventListener("pointerleave",d),u.removeEventListener("pointerleave",m)}}},[c,u,y,g]),i.useEffect(()=>{if(l){const d=m=>{const x=m.target,v={x:m.clientX,y:m.clientY},w=c?.contains(x)||u?.contains(x),C=!Ht(v,l);w?g():C&&(g(),f())};return document.addEventListener("pointermove",d),()=>document.removeEventListener("pointermove",d)}},[c,u,l,f,g]),r.jsx(Te,{...e,ref:o})}),[Lt,St]=S(Q,{isInside:!1}),Te=i.forwardRef((e,t)=>{const{__scopeTooltip:s,children:a,"aria-label":n,onEscapeKeyDown:o,onPointerDownOutside:l,...h}=e,c=I(E,s),f=_(s),{onClose:u}=c;return i.useEffect(()=>(document.addEventListener(q,u),()=>document.removeEventListener(q,u)),[u]),i.useEffect(()=>{if(c.trigger){const p=g=>{g.target?.contains(c.trigger)&&u()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[c.trigger,u]),r.jsx(Xe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:p=>p.preventDefault(),onDismiss:u,children:r.jsxs(Qe,{"data-state":c.stateAttribute,...f,...h,ref:t,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(Le,{children:a}),r.jsx(Lt,{scope:s,isInside:!0,children:r.jsx(Mt,{id:c.contentId,role:"tooltip",children:n||a})})]})})});Pe.displayName=E;var Me="TooltipArrow",_t=i.forwardRef((e,t)=>{const{__scopeTooltip:s,...a}=e,n=_(s);return St(Me,s).isInside?null:r.jsx(Ie,{...n,...a,ref:t})});_t.displayName=Me;function Qt(e,t){const s=Math.abs(t.top-e.y),a=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(s,a,n,o)){case o:return"left";case n:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function It(e,t,s=5){const a=[];switch(t){case"top":a.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":a.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":a.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":a.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return a}function Ft(e){const{top:t,right:s,bottom:a,left:n}=e;return[{x:n,y:t},{x:s,y:t},{x:s,y:a},{x:n,y:a}]}function Ht(e,t){const{x:s,y:a}=e;let n=!1;for(let o=0,l=t.length-1;o<t.length;l=o++){const h=t[o].x,c=t[o].y,f=t[l].x,u=t[l].y;c>a!=u>a&&s<(f-h)*(a-c)/(u-c)+h&&(n=!n)}return n}function qt(e){const t=e.slice();return t.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),Bt(t)}function Bt(e){if(e.length<=1)return e.slice();const t=[];for(let a=0;a<e.length;a++){const n=e[a];for(;t.length>=2;){const o=t[t.length-1],l=t[t.length-2];if((o.x-l.x)*(n.y-l.y)>=(o.y-l.y)*(n.x-l.x))t.pop();else break}t.push(n)}t.pop();const s=[];for(let a=e.length-1;a>=0;a--){const n=e[a];for(;s.length>=2;){const o=s[s.length-1],l=s[s.length-2];if((o.x-l.x)*(n.y-l.y)>=(o.y-l.y)*(n.x-l.x))s.pop();else break}s.push(n)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var Gt=je,Kt=Ce,$t=Ne,Ee=Pe;const zt=Gt,Ut=Kt,Vt=$t,Oe=i.forwardRef(({className:e,sideOffset:t=4,...s},a)=>r.jsx(Ee,{ref:a,sideOffset:t,className:k("z-50 overflow-hidden rounded-md border px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));Oe.displayName=Ee.displayName;function Xt(e){return ne({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M3 1C2.44771 1 2 1.44772 2 2V13C2 13.5523 2.44772 14 3 14H10.5C10.7761 14 11 13.7761 11 13.5C11 13.2239 10.7761 13 10.5 13H3V2L10.5 2C10.7761 2 11 1.77614 11 1.5C11 1.22386 10.7761 1 10.5 1H3ZM12.6036 4.89645C12.4083 4.70118 12.0917 4.70118 11.8964 4.89645C11.7012 5.09171 11.7012 5.40829 11.8964 5.60355L13.2929 7H6.5C6.22386 7 6 7.22386 6 7.5C6 7.77614 6.22386 8 6.5 8H13.2929L11.8964 9.39645C11.7012 9.59171 11.7012 9.90829 11.8964 10.1036C12.0917 10.2988 12.4083 10.2988 12.6036 10.1036L14.8536 7.85355C15.0488 7.65829 15.0488 7.34171 14.8536 7.14645L12.6036 4.89645Z",fill:"currentColor"},child:[]}]})(e)}const H=[{title:"My Profile",href:"/settings/profile"},{title:"My Household",href:"/settings/household"}];var Zt=class extends pe{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,s){const a=t.queryKey,n=t.queryHash??xe(a,t);let o=this.get(n);return o||(o=new Je({cache:this,queryKey:a,queryHash:n,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){b.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>U(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>U(e,s)):t}notify(e){b.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){b.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){b.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Yt=class extends pe{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,s){const a=new We({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:s});return this.add(a),a}add(e){const t=R(e),s=this.#e.get(t)??[];s.push(e),this.#e.set(t,s),this.notify({type:"added",mutation:e})}remove(e){const t=R(e);if(this.#e.has(t)){const s=this.#e.get(t)?.filter(a=>a!==e);s&&(s.length===0?this.#e.delete(t):this.#e.set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(R(e))?.find(s=>s.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(R(e))?.find(s=>s!==e&&s.state.isPaused)?.continue()??Promise.resolve()}clear(){b.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(s=>V(t,s))}findAll(e={}){return this.getAll().filter(t=>V(e,t))}notify(e){b.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return b.batch(()=>Promise.all(e.map(t=>t.continue().catch(j))))}};function R(e){return e.options.scope?.id??String(e.mutationId)}function ee(e){return{onFetch:(t,s)=>{const a=t.options,n=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],l=t.state.data?.pageParams||[];let h={pages:[],pageParams:[]},c=0;const f=async()=>{let u=!1;const p=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},g=et(t.options,t.fetchOptions),y=async(d,m,x)=>{if(u)return Promise.reject();if(m==null&&d.pages.length)return Promise.resolve(d);const v={queryKey:t.queryKey,pageParam:m,direction:x?"backward":"forward",meta:t.options.meta};p(v);const w=await g(v),{maxPages:C}=t.options,N=x?tt:st;return{pages:N(d.pages,w,C),pageParams:N(d.pageParams,m,C)}};if(n&&o.length){const d=n==="backward",m=d?Wt:te,x={pages:o,pageParams:l},v=m(a,x);h=await y(x,v,d)}else{const d=e??o.length;do{const m=c===0?l[0]??a.initialPageParam:te(a,h);if(c>0&&m==null)break;h=await y(h,m),c++}while(c<d)}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=f}}}function te(e,{pages:t,pageParams:s}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,s[a],s):void 0}function Wt(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}var Jt=class{#e;#t;#s;#a;#n;#r;#o;#i;constructor(e={}){this.#e=e.queryCache||new Zt,this.#t=e.mutationCache||new Yt,this.#s=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#o=rt.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=X.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const s=this.defaultQueryOptions(e),a=this.#e.build(this,s);return e.revalidateIfStale&&a.isStaleByTime(Z(s.staleTime,a))&&this.prefetchQuery(s),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:s})=>{const a=s.data;return[t,a]})}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(a.queryHash)?.state.data,l=at(t,o);if(l!==void 0)return this.#e.build(this,a).setData(l,{...s,manual:!0})}setQueriesData(e,t,s){return b.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;b.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=this.#e,a={type:"active",...e};return b.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(a,t)))}cancelQueries(e={},t={}){const s={revert:!0,...t},a=b.batch(()=>this.#e.findAll(e).map(n=>n.cancel(s)));return Promise.all(a).then(j).catch(j)}invalidateQueries(e={},t={}){return b.batch(()=>{if(this.#e.findAll(e).forEach(a=>{a.invalidate()}),e.refetchType==="none")return Promise.resolve();const s={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(s,t)})}refetchQueries(e={},t){const s={...t,cancelRefetch:t?.cancelRefetch??!0},a=b.batch(()=>this.#e.findAll(e).filter(n=>!n.isDisabled()).map(n=>{let o=n.fetch(void 0,s);return s.throwOnError||(o=o.catch(j)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(a).then(j)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=this.#e.build(this,t);return s.isStaleByTime(Z(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(j).catch(j)}fetchInfiniteQuery(e){return e.behavior=ee(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(j).catch(j)}ensureInfiniteQueryData(e){return e.behavior=ee(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return X.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#a.set(Y(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()];let s={};return t.forEach(a=>{W(e,a.queryKey)&&(s={...s,...a.defaultOptions})}),s}setMutationDefaults(e,t){this.#n.set(Y(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()];let s={};return t.forEach(a=>{W(e,a.mutationKey)&&(s={...s,...a.defaultOptions})}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=xe(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===nt&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},D={};const se=[{name:"Shopping Lists",href:"/lists",comingSoon:!1,httpKey:J.latestGrocerylistByUserId,queryFn:async e=>await lt(await e).then(t=>t.data)},{name:"Items",href:"/items",comingSoon:!1,httpKey:J.ingredients,queryFn:async e=>await ct(await e).then(t=>t.data)},{name:"Meal Plans",href:"/plans",comingSoon:D.NEXT_PUBLIC_FLAG_FEATURE_MEALPLANS!=="true"},{name:"Meals",href:"/meals",comingSoon:D.NEXT_PUBLIC_FLAG_FEATURE_MEALPLANS!=="true"}];function es({currentUser:e}){const s=re().location.pathname,{getToken:a}=Ae();return e?r.jsx("nav",{className:"w-full z-50 bg-header",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"flex-shrink-0 flex",children:[r.jsx("h1",{className:"text-white text-2xl font-extrabold",children:"M"}),r.jsx("h1",{className:"text-white text-2xl font-extrabold",children:"unchies"})]}),r.jsx("div",{className:"hidden md:block ml-10",children:r.jsx("div",{className:"flex items-baseline space-x-4",children:se.map(n=>r.jsx(ts,{href:n.href,active:s===n.href,comingSoon:n.comingSoon,httpKey:n.httpKey,queryFn:async()=>{const o=await a({template:"1_HOUR"}).then(l=>l?.toString());return!o||!n.queryFn||s===n.href?null:n.queryFn(o)},children:n.name},n.name))})})]}),r.jsx("div",{className:"hidden md:block",children:r.jsx("div",{className:"ml-4 flex items-center md:ml-6",children:r.jsx(ss,{avatar:e.image,username:`${e.firstName} ${e.lastName}`,email:e.email})})}),r.jsx("div",{className:"flex items-center md:hidden",children:r.jsxs(vt,{children:[r.jsx(bt,{asChild:!0,children:r.jsxs(ie,{variant:"ghost",size:"icon",className:"text-white ml-2 w-10 h-10",children:[r.jsx(gt,{className:"min-h-6 min-w-6"}),r.jsx("span",{className:"sr-only",children:"Open main menu"})]})}),r.jsx(ve,{side:"right",className:"w-full sm:max-w-sm text-white bg-header",children:r.jsx(rs,{avatar:e.image,username:`${e.firstName} ${e.lastName}`,navigation:se,email:e.email})})]})})]})})}):null}function ts({href:e,active:t,children:s,comingSoon:a,httpKey:n,queryFn:o}){const l=ot();return a?r.jsx(zt,{children:r.jsxs(Ut,{children:[r.jsx(Vt,{children:r.jsx(A,{href:"#",className:`relative px-3 py-2 rounded-md text-sm font-medium ${t?"bg-gray-700 text-white":a?"text-gray-500 hover:bg-gray-700 hover:text-gray-500":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:s})}),r.jsx(Oe,{children:"Coming Soon"})]})}):r.jsx(A,{href:e,className:`px-3 py-2 rounded-md text-sm font-medium ${t?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,onMouseEnter:async()=>{!n||!o||await l.prefetchQuery({queryKey:n,queryFn:o})},children:s})}function ss({avatar:e,username:t,email:s}){const n=re().location.pathname,o=ut();return r.jsxs(He,{children:[r.jsx(qe,{asChild:!0,children:r.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-400 to-primary rounded-full flex justify-center items-center",children:r.jsx("img",{className:"h-10 w-10 rounded-full",src:e,alt:`${t}'s avatar`,width:40,height:40})})}),r.jsxs(Be,{align:"end",className:"w-56 p-2",children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("img",{className:"h-10 w-10 rounded-full",src:e,alt:`${t}'s avatar`,width:40,height:40}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h3",{className:"text-sm font-medium",children:t}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s})]})]}),r.jsx(z,{className:"my-2"}),r.jsx(F,{asChild:!0,children:r.jsxs(A,{href:"/settings/profile",className:"flex items-center",onMouseEnter:async()=>{console.log("prefetch"),n!=="/settings/profile"&&await o.prefetch()},children:[r.jsx(dt,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Profile"})]})}),r.jsx(F,{asChild:!0,children:r.jsxs(A,{href:"/settings/household",className:"flex items-center",children:[r.jsx(ge,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Household"})]})}),r.jsx(z,{className:"my-2"}),r.jsxs(F,{className:"w-full h-8",children:[r.jsx(Xt,{className:"mr-2 h-4 w-4"}),r.jsx(ae,{})]})]})]})}function rs({avatar:e,username:t,navigation:s,email:a}){return r.jsxs("div",{className:"pt-5 pb-3 space-y-1 bg-header",children:[r.jsxs("div",{className:"flex items-center px-4 mb-8",children:[r.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-400 to-primary rounded-full flex justify-center items-center",children:r.jsx("img",{className:"h-10 w-10 rounded-full",src:e,alt:`${t}'s avatar`,width:40,height:40})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-base font-medium text-gray-800 dark:text-white",children:t}),r.jsx("p",{className:"text-sm text-muted-foreground",children:a})]})]}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx(T,{href:"/lists",icon:r.jsx(ht,{className:"h-6 w-6"}),children:r.jsx(P,{children:"Lists"})}),r.jsx(T,{href:"/items",icon:r.jsx(xt,{className:"h-6 w-6"}),children:r.jsx(P,{children:"Items"})}),r.jsx(T,{href:"/plans",icon:r.jsx(ft,{className:"h-6 w-6"}),comingSoon:D.NEXT_PUBLIC_FLAG_FEATURE_MEALPLANS!=="true",children:r.jsx(P,{children:"Meal plans"})}),r.jsx(T,{href:"/meals",icon:r.jsx(pt,{className:"h-6 w-6"}),comingSoon:D.NEXT_PUBLIC_FLAG_FEATURE_MEALPLANS!=="true",children:r.jsx(P,{children:"Meals"})}),r.jsx(T,{href:H[0].href,icon:r.jsx(yt,{className:"h-6 w-6"}),children:r.jsx(P,{children:"Settings"})}),r.jsx(T,{href:H[0].href,icon:r.jsx(Pt,{className:"h-6 w-6 ml-4"}),children:r.jsx(P,{children:"Profile"})}),r.jsx(T,{href:H[1].href,icon:r.jsx(ge,{className:"h-6 w-6 ml-4"}),children:r.jsx(P,{children:"Household"})}),r.jsx("div",{className:"px-4 pt-4",children:r.jsx(ie,{className:"w-full h-10 mt-2",variant:"destructive",children:r.jsx(ae,{})})})]})]})}function T({href:e,icon:t,children:s,comingSoon:a}){return r.jsx(A,{href:a?"#":e,className:"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 block px-4 py-2 rounded-md text-base",children:r.jsxs("span",{className:"flex items-center",children:[t,r.jsx("span",{className:`ml-3 ${a?"text-muted-foreground":""}`,children:s}),a&&r.jsx("span",{className:"ml-3 text-xs text-muted-foreground",children:"(Coming Soon)"})]})})}function as({children:e,user:t}){return r.jsxs("div",{className:"min-h-screen flex flex-col relative",children:[r.jsx(es,{currentUser:t}),r.jsxs("main",{className:"",children:[r.jsx("div",{className:"absolute top-0 left-0 right-0 h-[300px] bg-header","aria-hidden":"true"}),r.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto md:px-4 lg:px-8 min-h-full",children:[r.jsx("div",{className:"h-20 md:h-20 flex items-center",children:r.jsx("div",{children:r.jsx("div",{className:"md:hidden flex gap-2 items-center",children:r.jsx("div",{className:"w-full flex justify-between px-2 md:px-3 md:mt-3"})})})}),r.jsx("div",{className:"bg-background md:bg-white md:rounded-lg md:shadow-lg overflow-hidden mb-80",children:r.jsx("div",{className:"px-0 py-0 md:px-4 md:py-5 sm:p-6",children:e})})]})]}),r.jsxs("div",{className:"absolute w-full flex flex-col justify-center items-center py-3 gap-2 bottom-2",children:[r.jsx("a",{href:"https://github.com/bernardmuller/munchies",target:"_blank",rel:"noreferrer",children:r.jsx(Re,{className:"w-6 h-6"})}),r.jsx("p",{className:"text-sm text-gray-400 text-center",children:"© 2024 Munchies. All rights reserved."})]})]})}var ns=function(){return null};const os=new Jt;function is(){const{isFetching:e,isAbsent:t,currentUser:s}=mt();return e&&t&&!s?r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-header text-gray-100",children:[r.jsx(Se,{className:"w-16 h-16 animate-spin"}),r.jsx("span",{className:"text-2xl font-bold",children:"Loading..."})]}):r.jsx(as,{user:s,children:r.jsx(ke,{})})}const Ts=()=>r.jsxs(it,{client:os,children:[r.jsx(is,{}),r.jsx(ns,{})]});export{Ts as component};
